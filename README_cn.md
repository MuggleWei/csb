- [HPB](#hpb)
  - [概览](#概览)
    - [特点](#特点)
  - [安装](#安装)
    - [从源码安装](#从源码安装)
    - [首次运行](#首次运行)
  - [使用](#使用)
    - [帮助](#帮助)
    - [文档](#文档)


# HPB
---
HPB(Happy Package Builder) 是一个 C/C++ 包管理工具, 同时也可以作为一个 CI 本地执行器使用  

## 概览
---
假设当前的工程 Y 依赖于库 {X1, X2, ..., Xn}, 而 `hpb` 的功能就找到用户指定版本, 并且适合当前平台和编译选项的依赖库 {X1, X2, ..., Xn}, 以及依赖的依赖, 并将它们拉取到当前的工程的依赖目录中. 当编译完成之后, `hpb` 可以方便的将生成的库文件以及当前的编译信息一起打包/上传, 使得下次需要 Y 的时候能够方便的拉取.  

### 特点
* 保持功能的简单与小巧, 聚焦于解决依赖包的获取问题与本地包的管理
* 不会侵入你的构建工具, 无论使用 CMake, Meson, Makefile, MSBuild 或者三体人的某个编译工具, 都可以使用 `hpb` 作为包管理, 甚至于只用它来下载依赖库而不进行编译 (好吧, 三体人的编译工具应该是不可以的)
* 去中心化, 用户可以在没有包管理服务器的情况下, 在本地管理自己的源码和包

## 安装
---
### 从源码安装
首先确保 python 已安装, 并且 python-pip 可以正常使用, 通过下面命令来检查是否已经正确安装
```
python --verion
python -m pip --version
```

**Unix类系统**  
确保 `~/.local/bin` 在 PATH 中, 接着执行项目根目录中的脚本 `install.sh`  

**Windows系统**  
执行项目根目录中的脚本 `install.bat`  

### 首次运行
执行完安装脚本之后, 运行以下命令, 检测安装结果并创建本地库数据库
```
hpb dbsync
```

## 使用
---

### 帮助

可以使用 `hpb -h` 来查看帮助, 当前 `hpb` 支持下面几个子命令  
* build: 解析 yaml 配置文件, 进行构建流程
* pack: 打包库文件
* push: 上传库文件 (当前暂时只支持上传至本地的制品库目录)
* pull: 拉取库文件 (当前暂时只支持拉取本地的制品库)
* search: 搜索库文件
* dbsync: 同步本地的包与数据库信息

而每个子命令, 也可以使用 `hpb [command] -h` 来查看帮助信息

### 文档
这里是 [入门指南](./doc/cn/user_guide.md), 它会一步一步的告诉你如何使用 `hpb`